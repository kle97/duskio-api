databaseChangeLog:
  - includeAll:
      relativeToChangelogFile: true
      path: schema
  - changeSet:
      id: truncateTables
      author: admin
      changes:
        - sql:
            sql: "
            SET FOREIGN_KEY_CHECKS=0; 
            SELECT CONCAT('TRUNCATE TABLE ', table_schema, '.', TABLE_NAME, ';') 
            FROM INFORMATION_SCHEMA.TABLES WHERE table_schema IN ('PUBLIC'); 
            SET FOREIGN_KEY_CHECKS=1;
            "
  - changeSet:
      id: resetID
      author: admin
      changes:
        - sql:
            sql: "
            SELECT CONCAT('ALTER TABLE ', table_schema, '.', TABLE_NAME, ' AUTO_INCREMENT=1;') 
            FROM INFORMATION_SCHEMA.TABLES WHERE table_schema IN ('PUBLIC');
            "
  - changeSet:
      id: loadAuthorData
      author: admin
      changes:
        - loadData:
            tableName: AUTHOR
            relativeToChangelogFile: true
            file: data/filtered-author.csv
            quotchar: '"'
  - changeSet:
      id: loadAuthorRelatedData
      author: admin
      changes:
        - loadData:
            tableName: ALTERNATE_NAME
            relativeToChangelogFile: true
            file: data/filtered-author-alternate-name.csv
            quotchar: '"'
        - loadData:
            tableName: AUTHOR_LINK
            relativeToChangelogFile: true
            file: data/filtered-author-link.csv
            quotchar: '"'
  - changeSet:
      id: loadWorkData
      author: admin
      changes:
        - loadData:
            tableName: WORK
            relativeToChangelogFile: true
            file: data/filtered-work.csv
            quotchar: '"'
        - loadData:
            tableName: SUBJECT
            relativeToChangelogFile: true
            file: data/filtered-subject.csv
            quotchar: '"'
        - loadData:
            tableName: PUBLISHER
            relativeToChangelogFile: true
            file: data/filtered-publisher.csv
            quotchar: '"'
  - changeSet:
      id: loadWorkRelatedData
      author: admin
      changes:
        - loadData:
            tableName: AUTHOR_WORK
            relativeToChangelogFile: true
            file: data/filtered-author-work.csv
            quotchar: '"'
        - loadData:
            tableName: RATING
            relativeToChangelogFile: true
            file: data/filtered-rating.csv
            quotchar: '"'
        - loadData:
            tableName: WORK_SUBJECT
            relativeToChangelogFile: true
            file: data/filtered-work-subject.csv
            quotchar: '"'
  - changeSet:
      id: loadEditionData
      author: admin
      changes:
        - loadData:
            tableName: EDITION
            relativeToChangelogFile: true
            file: data/filtered-edition.csv
            quotchar: '"'